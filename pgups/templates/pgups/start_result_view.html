{% extends 'pgups/base.html' %}
{% load staticfiles %}
{% load extras %}
{% block content %}

<!-- Notie messages -->
{% for message in messages %}
  <script src="{% static 'js/notie.min.js' %}"></script>
  <script> notie.alert(1, 'Результат сохранён!', 0.5); </script>
{% endfor %}

<div>

  <div class="row">

    <!-- Heading -->
    <div class="heading">
      <a class="decorated-link" href="{% url 'competition_starts' competition_id=competition_id %}#start{{start_num}}">
        <h4>Список заплывов</h4>
      </a>
    </div> <!-- End of Heading -->

    <!-- Start number -->
    <div class="start-number">
      <h5>Заплыв {{start_num}} ({{cdsg_name}})</h5>
    </div> <!-- End of Start number -->

    <table class="table bordered highlight">
      <thead>
        <tr>
          <th>№</th>
          <th>Участник</th>
          <th>Команда</th>
          <th class="center-align">Категория</th>
          <th class="center-align">Результат</th>
          <th class="center-align">Дисквалиф.</th>
        </tr>
      </thead>

      <tbody>
      {% for competitor in competitors %}
        <tr>
          <td>{{competitor.lane}}</td>
          <td>{{competitor.person.last_name|title}} {{competitor.person.first_name|title}}</td>
          <td>{{competitor.userrequest.team.name}}</td>
          <td class="center-align">{{competitor.age}}</td>
          <td class="center-align">{{competitor.time|formatSeconds}}</td>
          <td class="center-align">
            {% if  competitor.disqualification == 1 %}
              {% if competitor.person.gender == 'Ж'%} Не вышла {% else %} Не вышел {% endif %}
            {% endif %}
            {% if  competitor.disqualification == 2 %} Фальстарт {% endif %}
            {% if  competitor.disqualification == 3 %} Нарушение правил поворота {% endif %}
            {% if  competitor.disqualification == 4 %} Нарушение правил прохождения дистанции {% endif %}
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>

    <div class="button-wrapper">
      <a class="waves-effect waves-light btn right blue darken-3" href="../../start_result/{{start_id}}/">Редактировать</a>
      {% if last_in_cdsg %}
        <br><br><a class="waves-effect waves-light btn right blue darken-3" href="{% url 'cdsg_print' cdsg_id=cdsg_id %}" target="_blank">Печать результата</a>
      {% endif %}
    </div>
  </div>

  <div class="row">

  <hr>

  <div class="button-wrapper">
  {% if prev_start_id %}
    <a class="waves-effect waves-light btn left blue darken-3" href="../../start_result/{{prev_start_id}}/">Предыдущий заплыв
    </a>
  {% endif %}

  {% if next_start_id %}
    <a class="waves-effect waves-light btn right blue darken-3" href="../../start_result/{{next_start_id}}/">
      Следующий заплыв
    </a>
  {% endif %}
  </div>
  </div>

</div>
{% endblock %}
